<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stakeholder Power/Interest Matrix Trainer</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the matrix lines and responsiveness */
        .matrix-grid {
            grid-template-areas:
                "q2 q1"
                "q4 q3";
            /* Ensure the grid is centered and adapts to screen size */
            max-width: 1000px;
            width: 95%;
            margin: 0 auto;
            border: 2px solid #3b82f6; /* Accent color for the frame */
            aspect-ratio: 1 / 1; /* Keep the grid square */
        }

        /* Specific grid areas for each quadrant */
        #q1 { grid-area: q1; }
        #q2 { grid-area: q2; }
        #q3 { grid-area: q3; }
        #q4 { grid-area: q4; }

        .quadrant {
            border: 1px dashed #60a5fa; /* Light dashed lines for quadrants */
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            transition: background-color 0.2s;
        }

        .quadrant-label {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            font-size: 0.8rem;
            font-weight: 600;
            color: #1e40af;
        }

        .card {
            cursor: grab;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 0.5rem 0;
            user-select: none;
            text-align: center;
        }

        .card:active {
            cursor: grabbing;
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Responsive stack for mobile */
        @media (max-width: 768px) {
            .matrix-grid {
                grid-template-areas:
                    "q2"
                    "q1"
                    "q4"
                    "q3";
                grid-template-columns: 1fr;
                aspect-ratio: auto;
            }
            .quadrant-label {
                position: static;
                text-align: center;
                margin-bottom: 0.5rem;
            }
        }
    </style>
    <script>
        // Data structure containing the stakeholders and the correct quadrant/feedback
        const stakeholders = [
            { id: 'users', name: 'Users & Decision-Makers (Surgeons, Procurement)', correctQuadrant: 'q1', 
              reason: 'Surgeons (Users) have **high interest** (it directly changes their work) and **high power** (if they won\'t use it, it fails). NHS Decision-Makers control the budget and require evidence.', 
              hint: 'Think about their ability to **block adoption (Power)** and how much the app changes their daily work (Interest). High/High.' },
            
            { id: 'innovators', name: 'Innovators & Investors (The Start-up, Funders)', correctQuadrant: 'q1', 
              reason: 'The Innovator is our client with **100% interest**. Investors have **high power** (can pull funding) and **high interest** (need a return).', 
              hint: 'This group owns the technology and holds the purse strings. Both Power and Interest are maximum. High/High.' },
            
            { id: 'ppi', name: 'Patients & the Public (PPI)', correctQuadrant: 'q3', 
              reason: 'Patients have a **very high interest** in the outcomes, ethics, and safety of surgical technology. Individually, their power is lower than regulators, making them great collaborators.', 
              hint: 'They are the ultimate recipients, making their Interest extremely high. But their direct, initial power to stop a trial is lower than regulators. Low/High.' },
            
            { id: 'governance', name: 'Governance & Assurance (MHRA, NICE)', correctQuadrant: 'q2', 
              reason: 'The **MHRA has absolute power** to block the device, and NICE determines reimbursement. However, their interest is strictly impartial **compliance**, not commercial success.', 
              hint: 'They are impartial gatekeepers whose main concern is compliance, making their **Interest low** relative to Users, but their **Power is absolute**. High/Low.' },

            // NEW Stakeholders added below

            { id: 'soc', name: 'Professional Societies (Royal College of Surgeons)', correctQuadrant: 'q2', 
              reason: 'The Royal College has **high power** because their endorsement is critical for credibility and training protocols across the profession. However, they have **low direct interest** in one specific app\'s commercial success, focusing only on maintaining high safety standards.', 
              hint: 'Their approval is powerful enough to mandate training or block widespread adoption, but they are impartial gatekeepers focused on professional standards. High/Low.' },
            
            { id: 'tech', name: 'Clinical/IT Support Staff (Scrub Nurses, Hospital IT)', correctQuadrant: 'q3', 
              reason: 'This group has **high interest** because the app adds new training, workflow steps, and IT management burdens. Their **power** to stop the *entire* project is lower than that of surgeons, but their involvement is critical for seamless day-to-day implementation.', 
              hint: 'They are the daily implementers and troubleshooters. Their workflow is highly impacted (High Interest), but they don\'t hold the budget or regulatory veto (Low Power). Low/High.' }
        ];

        let draggedId;
        const placedCards = {}; // To track where cards are placed {cardId: quadrantId}
        const MAX_CARDS = stakeholders.length;
        let correctPlacements = 0;

        // --- Core Drag and Drop Functions ---

        function dragStart(e) {
            draggedId = e.target.id;
            e.dataTransfer.setData('text/plain', draggedId);
            // Add a style to make the dragged item slightly transparent
            setTimeout(() => e.target.classList.add('opacity-50'), 0);
        }

        function dragEnd(e) {
            e.target.classList.remove('opacity-50');
        }

        function allowDrop(e) {
            e.preventDefault();
            // Highlight the drop zone
            if (e.target.classList.contains('quadrant')) {
                e.target.classList.add('bg-blue-50', 'ring-2', 'ring-blue-400');
            }
        }

        function leaveDrop(e) {
            // Remove highlight
            if (e.target.classList.contains('quadrant')) {
                e.target.classList.remove('bg-blue-50', 'ring-2', 'ring-blue-400');
            }
        }

        function drop(e) {
            e.preventDefault();
            // Find the actual quadrant element to drop into (in case the drop lands on a card inside the quadrant)
            const dropTarget = e.target.closest('.quadrant');
            if (!dropTarget) return; // Drop occurred outside a quadrant

            const quadrantId = dropTarget.id;
            const cardElement = document.getElementById(draggedId);
            const stakeholderData = stakeholders.find(s => s.id === draggedId);
            const feedbackContainer = document.getElementById('feedback-message');

            if (!cardElement || !quadrantId) return;

            // 1. Remove highlight
            dropTarget.classList.remove('bg-blue-50', 'ring-2', 'ring-blue-400');

            // 2. Check if the card is already placed correctly (prevent movement)
            if (cardElement.classList.contains('correct')) {
                return;
            }

            // 3. Validation Logic
            if (stakeholderData.correctQuadrant === quadrantId) {
                // CORRECT Placement
                if (placedCards[draggedId] !== quadrantId) {
                    correctPlacements++;
                }
                
                // Move element
                dropTarget.appendChild(cardElement);

                // Update styles and state
                cardElement.classList.remove('bg-gray-100', 'hover:bg-gray-200', 'shadow-md', 'text-gray-800');
                cardElement.classList.add('bg-green-100', 'border-green-400', 'text-green-800', 'shadow-lg', 'correct');
                cardElement.setAttribute('draggable', 'false');
                cardElement.style.pointerEvents = 'none'; // Lock the card

                // Display SUCCESS feedback
                feedbackContainer.innerHTML = `<div class="p-4 rounded-lg bg-green-50 border border-green-300">
                    <p class="font-bold text-green-700">✅ Correct Placement: ${stakeholderData.name}</p>
                    <p class="text-sm text-green-700 mt-1">${stakeholderData.reason}</p>
                </div>`;
                
                // Track placement
                placedCards[draggedId] = quadrantId;
                
                // Check for completion
                if (correctPlacements === MAX_CARDS) {
                    showCompletionMessage();
                }

            } else {
                // INCORRECT Placement
                
                // Only provide a hint if the card wasn't already placed somewhere
                feedbackContainer.innerHTML = `<div class="p-4 rounded-lg bg-red-50 border border-red-300">
                    <p class="font-bold text-red-700">❌ Incorrect: Try Again!</p>
                    <p class="text-sm text-red-700 mt-1">**Hint:** ${stakeholderData.hint}</p>
                </div>`;
                
                // Reset card visually to indicate it wasn't accepted
                cardElement.classList.remove('opacity-50');
            }
        }

        function showCompletionMessage() {
            document.getElementById('completion-message').innerHTML = `
                <div class="p-6 mt-4 bg-yellow-100 border-2 border-yellow-500 rounded-xl shadow-2xl">
                    <h3 class="text-xl font-extrabold text-yellow-800 mb-2">🎉 Congratulations! All Stakeholders Mapped!</h3>
                    <p class="text-yellow-800">You have successfully mapped all six stakeholder groups based on their power and interest in the VR Surgical App. You're ready to start building strategic engagement plans!</p>
                </div>
            `;
            document.getElementById('feedback-message').innerHTML = ''; // Clear final feedback
        }

        // --- Initialization Function ---

        window.onload = function() {
            const cardsContainer = document.getElementById('stakeholder-cards');
            stakeholders.forEach(s => {
                const card = document.createElement('div');
                card.id = s.id;
                // Add a specific margin-left to the card when placed in a quadrant
                card.className = 'card bg-gray-100 hover:bg-gray-200 shadow-md p-3 rounded-lg text-sm font-medium border border-gray-300 text-gray-800 w-full md:w-56';
                card.setAttribute('draggable', 'true');
                card.textContent = s.name;

                card.addEventListener('dragstart', dragStart);
                card.addEventListener('dragend', dragEnd);
                cardsContainer.appendChild(card);
            });

            // Set up drop listeners on all quadrants
            document.querySelectorAll('.quadrant').forEach(quadrant => {
                quadrant.addEventListener('dragover', allowDrop);
                quadrant.addEventListener('dragleave', leaveDrop);
                quadrant.addEventListener('drop', drop);
            });
        };
    </script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-extrabold text-blue-600 mb-2">Stakeholder Strategy Trainer</h1>
        <p class="text-lg mb-6 text-gray-600">Exercise: Map **SIX** Stakeholders for the **VR Surgical App**</p>

        <!-- Stakeholder Cards -->
        <div id="stakeholder-cards" class="flex flex-wrap gap-4 justify-center p-4 bg-white shadow-lg rounded-xl mb-6 border border-gray-200">
            <p class="text-sm font-semibold w-full text-center text-blue-700 mb-2">Drag the cards below into the correct quadrant.</p>
            <!-- Cards will be inserted here by JavaScript -->
        </div>

        <!-- Feedback Area -->
        <div id="feedback-message" class="min-h-[70px] mb-6">
            <div class="p-4 rounded-lg bg-blue-50 border border-blue-300 text-sm text-blue-700">
                Drag a stakeholder card onto a quadrant to see the strategy reason or get a hint!
            </div>
        </div>
        
        <!-- Completion Message Area -->
        <div id="completion-message"></div>

        <!-- Power/Interest Matrix Grid -->
        <div class="matrix-grid grid grid-cols-2 md:grid-cols-2 gap-0 relative bg-white shadow-2xl rounded-xl overflow-hidden">

            <!-- AXIS LABELS -->
            <div class="absolute top-1/2 -left-16 transform -translate-y-1/2 -rotate-90 text-xl font-bold text-gray-700 hidden md:block">POWER</div>
            <div class="absolute -top-10 left-1/2 transform -translate-x-1/2 text-xl font-bold text-gray-700 hidden md:block">INTEREST</div>
            
            <div class="absolute bottom-4 left-4 text-xs font-semibold text-gray-500">LOW INTEREST</div>
            <div class="absolute bottom-4 right-4 text-xs font-semibold text-gray-500">HIGH INTEREST</div>
            <div class="absolute top-4 left-4 text-xs font-semibold text-gray-500">HIGH POWER</div>
            <div class="absolute bottom-4 left-4 transform -rotate-90 origin-bottom-left text-xs font-semibold text-gray-500 md:hidden">LOW POWER</div>

            <!-- Quadrant 2: Keep Satisfied (High Power, Low Interest) -->
            <div id="q2" class="quadrant relative bg-red-50/50">
                <span class="text-lg font-extrabold text-red-800">Keep Satisfied</span>
                <span class="text-sm text-red-600">Provide Assurance</span>
            </div>

            <!-- Quadrant 1: Manage Closely (High Power, High Interest) -->
            <div id="q1" class="quadrant relative bg-green-50/50">
                <span class="text-lg font-extrabold text-green-800">Manage Closely</span>
                <span class="text-sm text-green-600">Full Engagement</span>
            </div>

            <!-- Quadrant 4: Monitor (Low Power, Low Interest) -->
            <div id="q4" class="quadrant relative bg-gray-50/50">
                <span class="text-lg font-extrabold text-gray-700">Monitor</span>
                <span class="text-sm text-gray-500">Minimal Effort</span>
            </div>

            <!-- Quadrant 3: Keep Informed (Low Power, High Interest) -->
            <div id="q3" class="quadrant relative bg-blue-50/50">
                <span class="text-lg font-extrabold text-blue-800">Keep Informed</span>
                <span class="text-sm text-blue-600">Consult & Involve</span>
            </div>
        </div>
        
        <div class="mt-8 text-center text-sm text-gray-500">
            <p>High Power is at the top of the matrix. High Interest is on the right side.</p>
        </div>
    </div>

</body>
</html>
